<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">

	<title>Logging &amp; Errors - Go-Smart Simulation Framework Documentation</title>

        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <link href="../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="..">Go-Smart Simulation Framework Documentation</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="..">Home</a>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Core <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../go-smart-launcher/">go-smart-launcher</a>
                        </li>
                    
                        <li >
                            <a href="../xml/">GSSF XML Format</a>
                        </li>
                    
                        <li >
                            <a href="../family/">Family in GSSA</a>
                        </li>
                    
                        <li class="active">
                            <a href="./">Logging &amp; Errors</a>
                        </li>
                    
                        <li >
                            <a href="../constants/">Constants</a>
                        </li>
                    
                        <li >
                            <a href="../regions/">Regions &amp; Geometry</a>
                        </li>
                    
                        <li >
                            <a href="../utilities/">Utilities</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Components <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../components/needle-library/">Needle Library Component</a>
                        </li>
                    
                        <li >
                            <a href="../components/mesher/">Meshing Components</a>
                        </li>
                    
                        <li >
                            <a href="../components/optimizer/">Optimizer Component</a>
                        </li>
                    
                        <li >
                            <a href="../components/elmergrid/">ElmerGrid Component</a>
                        </li>
                    
                        <li >
                            <a href="../components/elmer/">ElmerSolver Component</a>
                        </li>
                    
                        <li >
                            <a href="../components/lesion/">Lesion Component</a>
                        </li>
                    
                        <li >
                            <a href="../components/validation/">Validation Component</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tools <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../tools/mesher-cgal/">CGAL Meshing (mesher-cgal)</a>
                        </li>
                    
                        <li >
                            <a href="../tools/numa-elmer/">Extensions to Elmer</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li >
                    <a rel="next" href="../family/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../constants/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#logging-errors-in-gssf">Logging &amp; Errors in GSSF</a></li>
        
            <li><a href="#logging-tools">Logging tools</a></li>
        
            <li><a href="#error-handling">Error handling</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="logging-errors-in-gssf">Logging &amp; Errors in GSSF</h1>
<h2 id="logging-tools">Logging tools</h2>
<h3 id="statistics-monitoring">Statistics monitoring</h3>
<p>GSSF has prototypal integration with
<a href="https://github.com/redbrain/vigilant">vigilant</a>, a tool that maintains a
datastore monitoring all instances of (in our case)
<a href="../go-smart-launcher/">go-smart-launcher</a>. It can do so across
multiple machines and provides a web-based interface for viewing. Note that this
is entirely distinct from GSSA, which orchestrates workflows such as GSSF, and
is unaware of vigilant monitoring.</p>
<p>Note that <em>vigilant</em> has changed name during the Go-Smart project, from
<em>observant</em>. This name is often used in the code and will be replaced as the
dependencies are updated. However, as the project is currently <em>vigilant</em>, and
seems to be going forward, the comments generally use this name to refer to it.</p>
<p>Monitoring can be configured using the YAML file
<em>{INSTALLROOT}/etc/gosmart/vigilant.cfg</em>. Configuration options are as described
in the <a href="https://github.com/redbrain/vigilant">vigilant</a> documentation.</p>
<p><strong>TODO</strong>: Update configuration format to JSON, following upstream change.</p>
<p><strong>FIXME</strong>: Posting vigilant messages on <code>log_line</code> is currently suspended,
as the filling pipe was slowing the rest of the master process. While this needs to be
farmed out to a thread properly, for the moment test this functionality by
uncommenting the marked line in logger_vigilant.py.</p>
<h3 id="logpick">Logpick</h3>
<p>The logpick functionality allows individual components of the GSSF workflow to
monitor their child process output for certain regular expressions, indicating
the start and end of some internal process. The GoSmartComponent class, on which
all the components are based, will sum the time spent in this internal task
(based on the child's output) and print the total when the subprocess exits. The
logpick entries are expressed as a triple in <code>GoSmartComponent.logpick_pairs</code>:</p>
<pre><code>("START_PATTERN", "END_PATTERN", "LABEL")
</code></pre>
<p>For example, in the Elmer solver:</p>
<pre><code>("CRS_IncompleteLU: ILU(0) (Real), Starting Factorization", "ComputeChange:", "Solver A")
</code></pre>
<p>gives, when the solver finally exits,</p>
<pre><code>Timings (sec resolution):
 --    9 Solver A &lt;'CRS_IncompleteLU: ILU(0) (Real), Starting Factorization' - 'ComputeChange:'&gt;
 --  486 [other]
    ====   
 -- 496
</code></pre>
<p>Adding additional logpick entries will, naturally, help account for more of the
time used.</p>
<h3 id="rate-limiting">Rate limiting</h3>
<p>Each component has a member <code>suppress_logging_over_per_second</code>, which may be
set to a maximum number of log lines per second from that component or <code>None</code>
to be disabled.</p>
<h2 id="error-handling">Error handling</h2>
<h3 id="exception-classes">Exception classes</h3>
<p>Very basic unified error types are provided, to help distinguish between user
errors, programmer errors, modeller errors and errors of unknown responsibility.</p>
<p>These contain codes which can be matched by the client-side tools. In theory,
all errors returned from GSSF will be one of these. Any
errors thrown beneath will be caught and wrapped accordingly.</p>
<table>
<thead>
<tr>
<th>Error Code</th>
<th>Error ID</th>
<th>Intepretation</th>
<th>GSSF exception class (if app.)</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SUCCESS</code></td>
<td>0</td>
<td>All worked</td>
<td>-</td>
</tr>
<tr>
<td><code>E_UNKNOWN</code></td>
<td>1</td>
<td>Error of unknown origin</td>
<td><code>GoSmartError</code></td>
</tr>
<tr>
<td><code>E_CLIENT</code></td>
<td>2</td>
<td>Triggered by an issue on the client side, such as illogical input</td>
<td><code>GoSmartClientError</code></td>
</tr>
<tr>
<td><code>E_SERVER</code></td>
<td>3</td>
<td>Problems with the server or server-side tools</td>
<td><code>GoSmartServerError</code></td>
</tr>
<tr>
<td><code>E_MODEL</code></td>
<td>4</td>
<td>Modelling problem, where the server cannot complete the task for physical/mathematical/numerical/syntactical reasons that are the responsibility of the model developer</td>
<td><code>GoSmartModelError</code></td>
</tr>
</tbody>
</table>
<p>In general, we err on the side of caution and attribute anything uncertain to
<code>E_SERVER</code> or <code>E_UNKNOWN</code>. However, it may be, in the future, that being less
conservative with <code>E_MODEL</code> will help provide automatic feedback on issues.</p>
<p>Ideally, in GSSF all errors thrown should be one of the classes listed above,
found in <code>gssf.errors</code>. These will be caught by
<a href="../go-smart-launcher/">go-smart-launcher</a> and an error file written that GSSA
can process and report accordingly. If using GSSF standalone, this will still
work properly.</p>
<h3 id="error-regexes">Error regexes</h3>
<p>Each line is checked for a per-component error regex, and stored as the
subprocess error message if it occurs. Since the subprocess may know nothing
about GSSF, such an approach is required to ensure we can provide some feedback,
at least, if it crashes.</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            
            <center>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</center>
        </footer>

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script>
        <script src="../js/base.js"></script>
    </body>
</html>