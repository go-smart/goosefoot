<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Logging &amp; Errors - Go-Smart Simulation Architecture Documentation</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  <link href="../extra.css" rel="stylesheet">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Logging &amp; Errors";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../overview/" class="icon icon-home"> Go-Smart Simulation Architecture Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../overview/">Overview</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../go-smart-launcher/">go-smart-launcher</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../xml/">GSSF XML Format</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../family/">Family in GSSA</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">Logging &amp; Errors</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#logging-errors-in-gssf">Logging &amp; Errors in GSSF</a></li>
                
                    <li><a class="toctree-l4" href="#logging-tools">Logging tools</a></li>
                
                    <li><a class="toctree-l4" href="#error-handling">Error handling</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../constants/">Constants</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../regions/">Regions &amp; Geometry</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../utilities/">Utilities</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Components</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../components/needle-library/">Needle Library Component</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../components/mesher/">Meshing Components</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../components/optimizer/">Optimizer Component</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../components/elmergrid/">ElmerGrid Component</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../components/elmer/">ElmerSolver Component</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../components/lesion/">Lesion Component</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../components/validation/">Validation Component</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Tools</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../tools/mesher-cgal/">CGAL Meshing (mesher-cgal)</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../tools/numa-elmer/">Extensions to Elmer</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../overview/">Go-Smart Simulation Architecture Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../overview/">Docs</a> &raquo;</li>
    
      
    
    <li>Logging &amp; Errors</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="logging-errors-in-gssf">Logging &amp; Errors in GSSF</h1>
<h2 id="logging-tools">Logging tools</h2>
<h3 id="statistics-monitoring">Statistics monitoring</h3>
<p>GSSF has prototypal integration with
<a href="https://github.com/redbrain/vigilant">vigilant</a>, a tool that maintains a
datastore monitoring all instances of (in our case)
<a href="../go-smart-launcher/">go-smart-launcher</a>. It can do so across
multiple machines and provides a web-based interface for viewing. Note that this
is entirely distinct from GSSA, which orchestrates workflows such as GSSF, and
is unaware of vigilant monitoring.</p>
<p>Note that <em>vigilant</em> has changed name during the Go-Smart project, from
<em>observant</em>. This name is often used in the code and will be replaced as the
dependencies are updated. However, as the project is currently <em>vigilant</em>, and
seems to be going forward, the comments generally use this name to refer to it.</p>
<p>Monitoring can be configured using the YAML file
<em>{INSTALLROOT}/etc/gosmart/vigilant.cfg</em>. Configuration options are as described
in the <a href="https://github.com/redbrain/vigilant">vigilant</a> documentation.</p>
<p><strong>TODO</strong>: Update configuration format to JSON, following upstream change.</p>
<p><strong>FIXME</strong>: Posting vigilant messages on <code>log_line</code> is currently suspended,
as the filling pipe was slowing the rest of the master process. While this needs to be
farmed out to a thread properly, for the moment test this functionality by
uncommenting the marked line in logger_vigilant.py.</p>
<h3 id="logpick">Logpick</h3>
<p>The logpick functionality allows individual components of the GSSF workflow to
monitor their child process output for certain regular expressions, indicating
the start and end of some internal process. The GoSmartComponent class, on which
all the components are based, will sum the time spent in this internal task
(based on the child's output) and print the total when the subprocess exits. The
logpick entries are expressed as a triple in <code>GoSmartComponent.logpick_pairs</code>:</p>
<pre><code>("START_PATTERN", "END_PATTERN", "LABEL")
</code></pre>
<p>For example, in the Elmer solver:</p>
<pre><code>("CRS_IncompleteLU: ILU(0) (Real), Starting Factorization", "ComputeChange:", "Solver A")
</code></pre>
<p>gives, when the solver finally exits,</p>
<pre><code>Timings (sec resolution):
 --    9 Solver A &lt;'CRS_IncompleteLU: ILU(0) (Real), Starting Factorization' - 'ComputeChange:'&gt;
 --  486 [other]
    ====   
 -- 496
</code></pre>
<p>Adding additional logpick entries will, naturally, help account for more of the
time used.</p>
<h3 id="rate-limiting">Rate limiting</h3>
<p>Each component has a member <code>suppress_logging_over_per_second</code>, which may be
set to a maximum number of log lines per second from that component or <code>None</code>
to be disabled.</p>
<h2 id="error-handling">Error handling</h2>
<h3 id="exception-classes">Exception classes</h3>
<p>Very basic unified error types are provided, to help distinguish between user
errors, programmer errors, modeller errors and errors of unknown responsibility.</p>
<p>These contain codes which can be matched by the client-side tools. In theory,
all errors returned from GSSF will be one of these. Any
errors thrown beneath will be caught and wrapped accordingly.</p>
<table>
<thead>
<tr>
<th>Error Code</th>
<th>Error ID</th>
<th>Intepretation</th>
<th>GSSF exception class (if app.)</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SUCCESS</code></td>
<td>0</td>
<td>All worked</td>
<td>-</td>
</tr>
<tr>
<td><code>E_UNKNOWN</code></td>
<td>1</td>
<td>Error of unknown origin</td>
<td><code>GoSmartError</code></td>
</tr>
<tr>
<td><code>E_CLIENT</code></td>
<td>2</td>
<td>Triggered by an issue on the client side, such as illogical input</td>
<td><code>GoSmartClientError</code></td>
</tr>
<tr>
<td><code>E_SERVER</code></td>
<td>3</td>
<td>Problems with the server or server-side tools</td>
<td><code>GoSmartServerError</code></td>
</tr>
<tr>
<td><code>E_MODEL</code></td>
<td>4</td>
<td>Modelling problem, where the server cannot complete the task for physical/mathematical/numerical/syntactical reasons that are the responsibility of the model developer</td>
<td><code>GoSmartModelError</code></td>
</tr>
</tbody>
</table>
<p>In general, we err on the side of caution and attribute anything uncertain to
<code>E_SERVER</code> or <code>E_UNKNOWN</code>. However, it may be, in the future, that being less
conservative with <code>E_MODEL</code> will help provide automatic feedback on issues.</p>
<p>Ideally, in GSSF all errors thrown should be one of the classes listed above,
found in <code>gssf.errors</code>. These will be caught by
<a href="../go-smart-launcher/">go-smart-launcher</a> and an error file written that GSSA
can process and report accordingly. If using GSSF standalone, this will still
work properly.</p>
<h3 id="error-regexes">Error regexes</h3>
<p>Each line is checked for a per-component error regex, and stored as the
subprocess error message if it occurs. Since the subprocess may know nothing
about GSSF, such an approach is required to ensure we can provide some feedback,
at least, if it crashes.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../constants/" class="btn btn-neutral float-right" title="Constants"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../family/" class="btn btn-neutral" title="Family in GSSA"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../family/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../constants/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
