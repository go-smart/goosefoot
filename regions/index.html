<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Regions &amp; Geometry - Go-Smart Simulation Architecture Documentation</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  <link href="../extra.css" rel="stylesheet">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Regions &amp; Geometry";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../overview/" class="icon icon-home"> Go-Smart Simulation Architecture Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../overview/">Overview</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../go-smart-launcher/">go-smart-launcher</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../xml/">GSSF XML Format</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../family/">Family in GSSA</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../logging/">Logging &amp; Errors</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../constants/">Constants</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">Regions &amp; Geometry</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#regions-and-geometry-in-gssf">Regions and Geometry in GSSF</a></li>
                
                    <li><a class="toctree-l4" href="#geometry">Geometry</a></li>
                
                    <li><a class="toctree-l4" href="#regions">Regions</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../utilities/">Utilities</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Components</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../components/needle-library/">Needle Library Component</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../components/mesher/">Meshing Components</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../components/optimizer/">Optimizer Component</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../components/elmergrid/">ElmerGrid Component</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../components/elmer/">ElmerSolver Component</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../components/lesion/">Lesion Component</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../components/validation/">Validation Component</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Tools</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../tools/mesher-cgal/">CGAL Meshing (mesher-cgal)</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../tools/numa-elmer/">Extensions to Elmer</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../overview/">Go-Smart Simulation Architecture Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../overview/">Docs</a> &raquo;</li>
    
      
    
    <li>Regions &amp; Geometry</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="regions-and-geometry-in-gssf">Regions and Geometry in GSSF</h1>
<h2 id="geometry">Geometry</h2>
<p>A specific simulation workflow has certain overarching geometrical information.
These are provided in the <code>&lt;geometry&gt;</code> section of the <a href="../xml/">GSSF-XML</a> file.
In particular, there are:</p>
<table>
<thead>
<tr>
<th>Property (Type)</th>
<th>Entry in <code>geometry</code> dictionary</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Centre <em>(x, y, z)</em></td>
<td><code>centre</code></td>
<td>Focal point of the simulation. Often a needle tip. Other locations generally expressed as an offset from this location. Default centre of simulation extent</td>
</tr>
<tr>
<td>Needle axis <em>(x, y, z)</em></td>
<td><code>needleaxis</code></td>
<td>Primary/default axis for the simulation. May or may not be an actual axis of a needle, but will be used as a fallback if a needle axis is not provided.</td>
</tr>
<tr>
<td>Simulation scaling factor <em>(r)</em></td>
<td><code>simulationscaling</code></td>
<td>The (multiplicative) ratio going from input surface length scales (e.g. mm) to simulation length scales (e.g. m)</td>
</tr>
</tbody>
</table>
<p>These may be referred to, and assumed to exist, in any component.</p>
<h2 id="regions">Regions</h2>
<p>Regions are geometric entities. They may be either 2D subdomains (boundary
subdomains) or 3D subdomains. They are specified in the <a href="../xml/">GSSF-XML</a> by
one of the three tags:</p>
<pre><code class="xml">    &lt;surface name=&quot;REGIONNAME&quot; input=&quot;INPUTLOCATION&quot; groups=&quot;GROUP1; GROUP2;...&quot; /&gt;
    &lt;zone name=&quot;REGIONNAME&quot; input=&quot;INPUTLOCATION&quot; groups=&quot;GROUP1; GROUP2;...&quot; /&gt;
    &lt;both name=&quot;REGIONNAME&quot; input=&quot;INPUTLOCATION&quot; groups=&quot;GROUP1; GROUP2;...&quot; /&gt;
</code></pre>

<p>The <code>REGIONNAME</code> may be any string used to refer to the region elsewhere in the
configuration (such as the <a href="../components/mesher/">mesher</a>) and the <code>INPUTLOCATION</code> is
usually the filename of the STL surface defining the region. This may be given
relative to the working directory. Generally, STL files are kept in an <code>input/</code>
subdirectory.</p>
<p>The <a href="../components/needle-library/">Needle Library</a> may add regions representing needles, as
<code>NEEDLE_[NEEDLEID]</code> (and <code>NEEDLE_[NEEDLEID]_ACTIVE</code>,
<code>NEEDLE_[NEEDLEID]_INACTIVE</code> if appropriate).</p>
<h3 id="labelling">Labelling</h3>
<p>Regions will be labelled by integers in the final mesh, which are used in the
Elmer SIF file to assign properties, boundary conditions and so forth. The
relationship between labels and regions is hard to predict if possible at all,
as it is dependent on the volumetric meshing, number of subdomains appearing in
the simulation domain and ordering of assignment.</p>
<p>As such, the <a href="../constants/">parameter dictionary</a> accessible in the SIF template
contains region entries. For example:</p>
<pre><code>&lt;regions&gt;
  &lt;surface name="organ" input... /&gt;
  ...
</code></pre>
<p>is used in the SIF template as follows:</p>
<pre><code>!===================
Boundary Condition 3
!===================
Target Boundary = Integer {{ p.REGION_ORGAN }}
Temperature = {{ p.CONSTANT_BODY_TEMPERATURE|typed }}
...
</code></pre>
<p>The conversion from region name to corresponding constant name uses
<a href="../utilities/#slugify">slugify</a>.</p>
<h4 id="groups">Groups</h4>
<p>As several regions can all effectively represent the same subdomain, or related
subdomains, <em>groups</em> allow you to indicate this in GSSF-XML. This is by far the
more common way to include mesh indexes in the SIF template, as it future proofs
against multiple related region entries, even if you currently only use one.</p>
<p>Groups are notated, for example:</p>
<pre><code>&lt;surface name="organ" input="input/organ.stl" groups="organs; outer-surfaces" /&gt;
</code></pre>
<p>In this case, entries <code>BOUNDARIES_ORGANS</code> and <code>BOUNDARIES_OUTER_SURFACES</code> will
be created in the global parameter dictionary. These actually include the whole
target boundary line in the SIF file, so if they are not present, the line is
omitted and no syntax error occurs.</p>
<pre><code>!===================
Boundary Condition 3
!===================
{{ p.BOUNDARIES_ORGANS }}
Temperature = {{ p.CONSTANT_BODY_TEMPERATURE|typed }}
...
</code></pre>
<p>Similarly, this is true for the needles in their parameter dictionaries, with
<code>needles[id].BOUNDARIES_NEEDLE_ACTIVE</code> and <code>needles[id].BOUNDARIES_NEEDLE_INACTIVE</code>.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../utilities/" class="btn btn-neutral float-right" title="Utilities"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../constants/" class="btn btn-neutral" title="Constants"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../constants/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../utilities/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
