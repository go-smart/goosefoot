<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">

	<title>Regions &amp; Geometry - Go-Smart Simulation Framework Documentation</title>

        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <link href="../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="..">Go-Smart Simulation Framework Documentation</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="..">Home</a>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Core <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../go-smart-launcher/">go-smart-launcher</a>
                        </li>
                    
                        <li >
                            <a href="../xml/">GSSF XML Format</a>
                        </li>
                    
                        <li >
                            <a href="../family/">Family in GSSA</a>
                        </li>
                    
                        <li >
                            <a href="../logging/">Logging &amp; Errors</a>
                        </li>
                    
                        <li >
                            <a href="../constants/">Constants</a>
                        </li>
                    
                        <li class="active">
                            <a href="./">Regions &amp; Geometry</a>
                        </li>
                    
                        <li >
                            <a href="../utilities/">Utilities</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Components <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../components/needle-library/">Needle Library Component</a>
                        </li>
                    
                        <li >
                            <a href="../components/mesher/">Meshing Components</a>
                        </li>
                    
                        <li >
                            <a href="../components/optimizer/">Optimizer Component</a>
                        </li>
                    
                        <li >
                            <a href="../components/elmergrid/">ElmerGrid Component</a>
                        </li>
                    
                        <li >
                            <a href="../components/elmer/">ElmerSolver Component</a>
                        </li>
                    
                        <li >
                            <a href="../components/lesion/">Lesion Component</a>
                        </li>
                    
                        <li >
                            <a href="../components/validation/">Validation Component</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tools <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../tools/mesher-cgal/">CGAL Meshing (mesher-cgal)</a>
                        </li>
                    
                        <li >
                            <a href="../tools/numa-elmer/">Extensions to Elmer</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li >
                    <a rel="next" href="../constants/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../utilities/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#regions-and-geometry-in-gssf">Regions and Geometry in GSSF</a></li>
        
            <li><a href="#geometry">Geometry</a></li>
        
            <li><a href="#regions">Regions</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="regions-and-geometry-in-gssf">Regions and Geometry in GSSF</h1>
<h2 id="geometry">Geometry</h2>
<p>A specific simulation workflow has certain overarching geometrical information.
These are provided in the <code>&lt;geometry&gt;</code> section of the <a href="../xml/">GSSF-XML</a> file.
In particular, there are:</p>
<table>
<thead>
<tr>
<th>Property (Type)</th>
<th>Entry in <code>geometry</code> dictionary</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Centre <em>(x, y, z)</em></td>
<td><code>centre</code></td>
<td>Focal point of the simulation. Often a needle tip. Other locations generally expressed as an offset from this location. Default centre of simulation extent</td>
</tr>
<tr>
<td>Needle axis <em>(x, y, z)</em></td>
<td><code>needleaxis</code></td>
<td>Primary/default axis for the simulation. May or may not be an actual axis of a needle, but will be used as a fallback if a needle axis is not provided.</td>
</tr>
<tr>
<td>Simulation scaling factor <em>(r)</em></td>
<td><code>simulationscaling</code></td>
<td>The (multiplicative) ratio going from input surface length scales (e.g. mm) to simulation length scales (e.g. m)</td>
</tr>
</tbody>
</table>
<p>These may be referred to, and assumed to exist, in any component.</p>
<h2 id="regions">Regions</h2>
<p>Regions are geometric entities. They may be either 2D subdomains (boundary
subdomains) or 3D subdomains. They are specified in the <a href="../xml/">GSSF-XML</a> by
one of the three tags:</p>
<pre><code class="xml">    &lt;surface name=&quot;REGIONNAME&quot; input=&quot;INPUTLOCATION&quot; groups=&quot;GROUP1; GROUP2;...&quot; /&gt;
    &lt;zone name=&quot;REGIONNAME&quot; input=&quot;INPUTLOCATION&quot; groups=&quot;GROUP1; GROUP2;...&quot; /&gt;
    &lt;both name=&quot;REGIONNAME&quot; input=&quot;INPUTLOCATION&quot; groups=&quot;GROUP1; GROUP2;...&quot; /&gt;
</code></pre>

<p>The <code>REGIONNAME</code> may be any string used to refer to the region elsewhere in the
configuration (such as the <a href="../components/mesher/">mesher</a>) and the <code>INPUTLOCATION</code> is
usually the filename of the STL surface defining the region. This may be given
relative to the working directory. Generally, STL files are kept in an <code>input/</code>
subdirectory.</p>
<p>The <a href="../components/needle-library/">Needle Library</a> may add regions representing needles, as
<code>NEEDLE_[NEEDLEID]</code> (and <code>NEEDLE_[NEEDLEID]_ACTIVE</code>,
<code>NEEDLE_[NEEDLEID]_INACTIVE</code> if appropriate).</p>
<h3 id="labelling">Labelling</h3>
<p>Regions will be labelled by integers in the final mesh, which are used in the
Elmer SIF file to assign properties, boundary conditions and so forth. The
relationship between labels and regions is hard to predict if possible at all,
as it is dependent on the volumetric meshing, number of subdomains appearing in
the simulation domain and ordering of assignment.</p>
<p>As such, the <a href="../constants/">parameter dictionary</a> accessible in the SIF template
contains region entries. For example:</p>
<pre><code>&lt;regions&gt;
  &lt;surface name="organ" input... /&gt;
  ...
</code></pre>
<p>is used in the SIF template as follows:</p>
<pre><code>!===================
Boundary Condition 3
!===================
Target Boundary = Integer {{ p.REGION_ORGAN }}
Temperature = {{ p.CONSTANT_BODY_TEMPERATURE|typed }}
...
</code></pre>
<p>The conversion from region name to corresponding constant name uses
<a href="../utilities/#slugify">slugify</a>.</p>
<h4 id="groups">Groups</h4>
<p>As several regions can all effectively represent the same subdomain, or related
subdomains, <em>groups</em> allow you to indicate this in GSSF-XML. This is by far the
more common way to include mesh indexes in the SIF template, as it future proofs
against multiple related region entries, even if you currently only use one.</p>
<p>Groups are notated, for example:</p>
<pre><code>&lt;surface name="organ" input="input/organ.stl" groups="organs; outer-surfaces" /&gt;
</code></pre>
<p>In this case, entries <code>BOUNDARIES_ORGANS</code> and <code>BOUNDARIES_OUTER_SURFACES</code> will
be created in the global parameter dictionary. These actually include the whole
target boundary line in the SIF file, so if they are not present, the line is
omitted and no syntax error occurs.</p>
<pre><code>!===================
Boundary Condition 3
!===================
{{ p.BOUNDARIES_ORGANS }}
Temperature = {{ p.CONSTANT_BODY_TEMPERATURE|typed }}
...
</code></pre>
<p>Similarly, this is true for the needles in their parameter dictionaries, with
<code>needles[id].BOUNDARIES_NEEDLE_ACTIVE</code> and <code>needles[id].BOUNDARIES_NEEDLE_INACTIVE</code>.</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            
            <center>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</center>
        </footer>

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script>
        <script src="../js/base.js"></script>
    </body>
</html>