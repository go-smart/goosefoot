<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">

	<title>Constants - Go-Smart Simulation Framework Documentation</title>

        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <link href="../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="..">Go-Smart Simulation Framework Documentation</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="..">Home</a>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Core <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../go-smart-launcher/">go-smart-launcher</a>
                        </li>
                    
                        <li >
                            <a href="../xml/">GSSF XML Format</a>
                        </li>
                    
                        <li >
                            <a href="../family/">Family in GSSA</a>
                        </li>
                    
                        <li >
                            <a href="../logging/">Logging &amp; Errors</a>
                        </li>
                    
                        <li class="active">
                            <a href="./">Constants</a>
                        </li>
                    
                        <li >
                            <a href="../regions/">Regions &amp; Geometry</a>
                        </li>
                    
                        <li >
                            <a href="../utilities/">Utilities</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Components <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../components/needle-library/">Needle Library Component</a>
                        </li>
                    
                        <li >
                            <a href="../components/mesher/">Meshing Components</a>
                        </li>
                    
                        <li >
                            <a href="../components/optimizer/">Optimizer Component</a>
                        </li>
                    
                        <li >
                            <a href="../components/elmergrid/">ElmerGrid Component</a>
                        </li>
                    
                        <li >
                            <a href="../components/elmer/">ElmerSolver Component</a>
                        </li>
                    
                        <li >
                            <a href="../components/lesion/">Lesion Component</a>
                        </li>
                    
                        <li >
                            <a href="../components/validation/">Validation Component</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tools <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../tools/mesher-cgal/">CGAL Meshing (mesher-cgal)</a>
                        </li>
                    
                        <li >
                            <a href="../tools/numa-elmer/">Extensions to Elmer</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li >
                    <a rel="next" href="../logging/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../regions/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#constants-in-gssf">Constants in GSSF</a></li>
        
            <li><a href="#parameters-in-the-elmer-sif-template">Parameters in the Elmer SIF template</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="constants-in-gssf">Constants in GSSF</h1>
<p>In GSSF code, parameters are generally referred to as <code>constants</code>, which is not
entirely accurate (TODO), but reflects the fact that the definition itself does
not usually change throughout the simulation. They are generally
floats/ints/etc. but may be MATC functions that are dropped into the SIF at the
start of the simulation.</p>
<p>Constants in GSSF mostly arise from the parameters set in the GSSF-XML, but
include other values such as the mesh scaling, which is not (in GSSF) in the
parameter section. They are also used to transfer certain values between
components, where one calculates and adds a constant to the global space and
another uses it.</p>
<h2 id="parameters-in-the-elmer-sif-template">Parameters in the Elmer SIF template</h2>
<p>The <a href="../components/elmer/#elmer-sif-template">SIF template</a> is a
<a href="http://jinja.pocoo.org/">Jinja2</a> template. As such, Python parameter
dictionaries are used to pass parameters into the template. These are named <code>p</code>
and <code>needles</code>, being the global and needle-specific parameters, respectively. The
needle parameter dictionary, <code>needles</code>, is a dictionary of parameter dictionaries,
indexed as integers based on the needle indexes from the GSSF-XML.</p>
<p>The parameter dictionaries are of class <code>ParameterDict</code>, which extends Python's
<code>dict</code> built-in. In particular, these can be used with the member syntax:
<code>p.CONSTANT_BODY_TEMPERATURE</code>, for example, will return the relevant <code>Parameter</code>
object for that parameter. This actually covers all global constants, not just
the GSSF parameters, so a few extra items are available. For instance,
<code>p.NEEDLE_AXIS_SCALE_X</code> will return the scaling in the <em>x</em> direction used by the
needle library.</p>
<p>The <code>Parameter</code> class, to which the returned parameters belong, is castable to
float, int and string. The Jinja filter <code>typed</code> will cause it to be output with
its SIF type as a prefix (useful, for example, when assigning to a property in
the SIF file). If not otherwise cast, it will appear as a string representation.
If the parameter type is an array, it will be converted to a space separated
list.</p>
<p>For instance, if the following line appears in the SIF template:</p>
<pre><code>...
Power = {{ p.CONSTANT_INPUT_POWER|typed }}
...
</code></pre>
<p>and the parameter in the GSSF-XML is:</p>
<pre><code>&lt;constant name="CONSTANT_INPUT_POWER" value="140.0" type="float" /&gt;
</code></pre>
<p>the rendered SIF will be:</p>
<pre><code>...
Power = Real 140.0
...
</code></pre>
<p>whereas, if the parameter in the GSSF-XML is:</p>
<pre><code>&lt;constant name="CONSTANT_INPUT_POWER" value="[140.0, 200.0, 120.0]" type="array(float)" /&gt;
</code></pre>
<p>the rendered SIF will be:</p>
<pre><code>...
Power = Real 140.0 200.0 120.0
...
</code></pre>
<p>Note that this does not take care of the need to supply an index count to the
power list. A conditional may be needed.</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            
            <center>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</center>
        </footer>

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script>
        <script src="../js/base.js"></script>
    </body>
</html>